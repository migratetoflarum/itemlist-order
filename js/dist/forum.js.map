{"version":3,"sources":["webpack://@migratetoflarum/itemlist-order/webpack/bootstrap","webpack://@migratetoflarum/itemlist-order/./forum.js","webpack://@migratetoflarum/itemlist-order/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@migratetoflarum/itemlist-order/./src/forum/components/Editor.js","webpack://@migratetoflarum/itemlist-order/./src/forum/components/EditorModal.js","webpack://@migratetoflarum/itemlist-order/./src/forum/index.js","webpack://@migratetoflarum/itemlist-order/./src/forum/utils/applyCustomListItemOrdering.js","webpack://@migratetoflarum/itemlist-order/./src/forum/utils/itemListToArrayWithoutExtractingContent.js","webpack://@migratetoflarum/itemlist-order/external \"flarum.core.compat['Component']\"","webpack://@migratetoflarum/itemlist-order/external \"flarum.core.compat['app']\"","webpack://@migratetoflarum/itemlist-order/external \"flarum.core.compat['components/Button']\"","webpack://@migratetoflarum/itemlist-order/external \"flarum.core.compat['extend']\"","webpack://@migratetoflarum/itemlist-order/external \"flarum.core.compat['helpers/icon']\"","webpack://@migratetoflarum/itemlist-order/external \"flarum.core.compat['utils/ItemList']\""],"names":["Editor","init","itemsOrder","start","end","hidden","dirty","view","items","itemListToArrayWithoutExtractingContent","props","renderItem","item","itemName","indexInStart","indexOf","indexInEnd","indexInHidden","removeFromStart","splice","removeFromEnd","removeFromHidden","m","key","title","priority","content","onclick","push","icon","length","unshift","sectionsContent","nothingMessage","entries","map","find","i","defaultContent","filter","Button","component","app","forum","data","attributes","itemorderConfig","name","finishedEdit","className","children","disabled","Component","EditorModal","event","target","classList","contains","close","bind","config","isInitialized","$","modal","backdrop","extendList","object","method","edit","override","original","args","modified","ItemList","add","Object","keys","hasOwnProperty","applyCustomListItemOrdering","stopPropagation","extendListByName","objectName","methodName","flarum","core","compat","prototype","initializers","startIndex","forEach","has","replace","endIndex","remove","list","sort","a","b"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import app from 'flarum/app';\nimport icon from 'flarum/helpers/icon';\nimport Component from 'flarum/Component';\nimport Button from 'flarum/components/Button';\nimport itemListToArrayWithoutExtractingContent from '../utils/itemListToArrayWithoutExtractingContent';\n\n/* global m */\n\nexport default class Editor extends Component {\n    init() {\n        super.init();\n\n        this.itemsOrder = {\n            start: [],\n            end: [],\n            hidden: [],\n        };\n        this.dirty = false;\n    }\n\n    view() {\n        const items = itemListToArrayWithoutExtractingContent(this.props.items);\n\n        const renderItem = item => {\n            const {itemName} = item;\n            const indexInStart = this.itemsOrder.start.indexOf(itemName);\n            const indexInEnd = this.itemsOrder.end.indexOf(itemName);\n            const indexInHidden = this.itemsOrder.hidden.indexOf(itemName);\n\n            const removeFromStart = () => {\n                if (indexInStart !== -1) {\n                    this.itemsOrder.start.splice(indexInStart, 1);\n                    this.dirty = true;\n                }\n            };\n\n            const removeFromEnd = () => {\n                if (indexInEnd !== -1) {\n                    this.itemsOrder.end.splice(indexInEnd, 1);\n                    this.dirty = true;\n                }\n            };\n\n            const removeFromHidden = () => {\n                if (indexInHidden !== -1) {\n                    this.itemsOrder.hidden.splice(indexInHidden, 1);\n                    this.dirty = true;\n                }\n            };\n\n            return m('.Itemlist-Order-Item', {\n                key: 'item-' + item.itemName,\n            }, [\n                m('.Itemlist-Order-Original', {\n                    title: 'Internal item name: ' + item.itemName + ' - Original priority: ' + item.priority,\n                }, item.content),\n                m('.Itemlist-Order-Actions', [\n                    m('button.Button.Button--link', {\n                        title: 'Move up',\n                        onclick: () => {\n                            removeFromHidden();\n                            if (indexInStart !== -1) {\n                                if (indexInStart > 0) {\n                                    removeFromStart();\n                                    this.itemsOrder.start.splice(indexInStart - 1, 0, itemName);\n                                    this.dirty = true;\n                                }\n                                // else: already at the top, don't move the item\n                            } else if (indexInEnd !== -1) {\n                                removeFromEnd();\n                                if (indexInEnd === 0) {\n                                    this.itemsOrder.start.push(itemName);\n                                } else {\n                                    this.itemsOrder.end.splice(indexInEnd - 1, 0, itemName);\n                                }\n                                this.dirty = true;\n                            } else {\n                                this.itemsOrder.start.push(itemName);\n                                this.dirty = true;\n                            }\n                        },\n                    }, icon('fas fa-angle-up')),\n                    m('button.Button.Button--link', {\n                        title: 'Move down',\n                        onclick: () => {\n                            removeFromHidden();\n                            if (indexInEnd !== -1) {\n                                if (indexInEnd < this.itemsOrder.end.length - 1) {\n                                    removeFromEnd();\n                                    this.itemsOrder.end.splice(indexInEnd + 1, 0, itemName);\n                                    this.dirty = true;\n                                }\n                                // else: already at the bottom, don't move the item\n                            } else if (indexInStart !== -1) {\n                                if (indexInStart === this.itemsOrder.start.length - 1) {\n                                    removeFromStart(); // Can't put this above condition or it would change the array length\n                                    this.itemsOrder.end.unshift(itemName);\n                                } else {\n                                    removeFromStart();\n                                    this.itemsOrder.start.splice(indexInStart + 1, 0, itemName);\n                                }\n                                this.dirty = true;\n                            } else {\n                                this.itemsOrder.end.unshift(itemName);\n                                this.dirty = true;\n                            }\n                        },\n                    }, icon('fas fa-angle-down')),\n                    m('button.Button.Button--link', {\n                        title: 'Hide',\n                        onclick: () => {\n                            if (indexInHidden === -1) {\n                                removeFromStart();\n                                removeFromEnd();\n                                this.itemsOrder.hidden.push(itemName);\n                                this.dirty = true;\n                            } else {\n                                removeFromHidden();\n                            }\n                        },\n                    }, icon('fas fa-eye' + (indexInHidden === -1 ? '-slash' : ''))),\n                    m('button.Button.Button--link', {\n                        title: 'Restore default position',\n                        onclick: () => {\n                            removeFromStart();\n                            removeFromEnd();\n                            removeFromHidden();\n                        },\n                    }, icon('fas fa-undo')),\n                ]),\n            ]);\n        };\n\n        const sectionsContent = (key, nothingMessage) => {\n            const entries = this.itemsOrder[key].map(itemName => {\n                const item = items.find(i => i.itemName === itemName);\n\n                // TODO: handle missing items\n                return renderItem(item);\n            });\n\n            if (entries.length) {\n                return entries;\n            }\n\n            return m('p', {\n                key: 'empty-' + key,\n            }, nothingMessage);\n        };\n\n        const defaultContent = items.filter(item => {\n            const {itemName} = item;\n            const indexInStart = this.itemsOrder.start.indexOf(itemName);\n            const indexInEnd = this.itemsOrder.end.indexOf(itemName);\n            const indexInHidden = this.itemsOrder.hidden.indexOf(itemName);\n\n            return indexInStart === -1 && indexInEnd === -1 && indexInHidden === -1;\n        }).map(item => renderItem(item));\n\n        if (!defaultContent.length) {\n            defaultContent.push(m('p', {\n                key: 'empty-default',\n            }, 'Items that appear in other situations or added by new extensions will be added here'));\n        }\n\n        return m('.ItemList-Order-Editor', [\n            Button.component({\n                onclick: () => {\n                    app.forum.data.attributes.itemorderConfig = app.forum.data.attributes.itemorderConfig || {};\n\n                    app.forum.data.attributes.itemorderConfig[this.props.name] = this.itemsOrder;\n\n                    this.props.finishedEdit();\n                },\n                className: 'Button Button--primary',\n                children: 'Save',\n                disabled: !this.dirty,\n            }),\n            ' ',\n            Button.component({\n                onclick: () => {\n                    this.itemsOrder = {\n                        start: [],\n                        end: [],\n                        hidden: [],\n                    };\n                },\n                icon: 'fas fa-undo',\n                className: 'Button',\n                children: 'Restore default order',\n            }),\n            m('div', [\n                m('h4', {\n                    key: 'head-start',\n                },'Before'),\n                sectionsContent('start', 'Move elements up to place them here'),\n                m('h4', {\n                    key: 'head-default',\n                }, 'Default'),\n                defaultContent,\n                m('h4', {\n                    key: 'head-end',\n                },'After'),\n                sectionsContent('end', 'Move elements down to place them here'),\n                m('h4', {\n                    key: 'head-hidden',\n                },'Hidden'),\n                sectionsContent('hidden', 'You have not hidden any element'),\n            ]),\n        ]);\n    }\n}\n","import Component from 'flarum/Component';\nimport Button from 'flarum/components/Button';\nimport Editor from './Editor';\n\n/* global m */\n\n// We can't use Flarum modals because in order to render the itemlist children,\n// the modal has to be a child of the itemlist itself or we would break Mithril rendering tree\nexport default class EditorModal extends Component {\n    view() {\n        return m('.Itemlist-Order-Modal', [\n            m('.ModalManager.modal.fade', {\n                onclick: event => {\n                    // Close modal when backdrop is clicked\n                    if (event.target.classList.contains('ModalManager')) {\n                        this.close();\n                    }\n                },\n            }, m('.Modal.modal-dialog', m('.Modal-content', [\n                m('.Modal-close', Button.component({\n                    icon: 'fas fa-times',\n                    onclick: () => {\n                        this.close();\n                    },\n                    className: 'Button Button--icon Button--link',\n                })),\n                m('.Modal-header', m('h3.App-titleControl App-titleControl--text', 'Update order of ' + this.props.name)),\n                m('.Modal-body', Editor.component({\n                    items: this.props.items,\n                    name: this.props.name,\n                    finishedEdit: this.close.bind(this),\n                })),\n            ]))),\n            m('.modal-backdrop.fade.in'),\n        ]);\n    }\n\n    config(isInitialized) {\n        if (isInitialized) {\n            return;\n        }\n\n        // Call bootstrap's modal method to correctly configure scrolling of the modal\n        // But in fact the modal is already partially hard-coded visible\n        // And we use our own backdrop to insert it inside our custom manager\n        this.$('.modal').modal({backdrop: false}).modal('show');\n    }\n\n    close() {\n        // Properly close modal, removes body class\n        this.$('.modal').modal('hide');\n\n        this.props.finishedEdit();\n    }\n}\n","import {extend, override} from 'flarum/extend';\nimport app from 'flarum/app';\nimport ItemList from 'flarum/utils/ItemList';\nimport Button from 'flarum/components/Button';\nimport applyCustomListItemOrdering from './utils/applyCustomListItemOrdering';\nimport EditorModal from './components/EditorModal';\n\n/* global flarum */\n\nfunction extendList(object, method, name) {\n    let edit = false;\n\n    override(object, method, function (original, ...args) {\n        const items = original(...args);\n\n        if (edit) {\n            const modified = new ItemList();\n\n            modified.add('itemlist-order-editor', EditorModal.component({\n                items,\n                name,\n                finishedEdit() {\n                    edit = false;\n                },\n            }));\n\n            return modified;\n        }\n\n        // If empty list, we don't offer any option\n        // TODO: settings if the field has a config but currently nothing in it ?\n        if (!Object.keys(items.items).length) {\n            return items;\n        }\n\n        if (app.forum.data.attributes.itemorderConfig && app.forum.data.attributes.itemorderConfig.hasOwnProperty(name)) {\n            applyCustomListItemOrdering(items, app.forum.data.attributes.itemorderConfig[name]);\n        }\n\n        items.add('itemlist-order-control', Button.component({\n            onclick(event) {\n                event.stopPropagation(); // Prevent dropdowns from closing\n                edit = true;\n            },\n            icon: 'fas fa-random',\n            className: 'Button',\n            children: 'Edit order',\n            title: name,\n        }), -11000);\n\n        return items;\n    });\n}\n\nfunction extendListByName(objectName, methodName) {\n    let object = flarum.core.compat[objectName];\n\n    if (objectName.indexOf('components/') === 0) {\n        object = object.prototype;\n    }\n\n    extendList(object, methodName, objectName + '.' + methodName);\n}\n\napp.initializers.add('migratetoflarum-itemlist-order', () => {\n    extendListByName('components/CommentPost', 'headerItems');\n    extendListByName('components/DiscussionComposer', 'headerItems');\n    extendListByName('components/DiscussionHero', 'items'); // TODO: post redraw strategy\n    extendListByName('components/DiscussionListItem', 'infoItems');\n    extendListByName('components/DiscussionPage', 'sidebarItems');\n    extendListByName('components/HeaderPrimary', 'items');\n    extendListByName('components/HeaderSecondary', 'items');\n    extendListByName('components/IndexPage', 'sidebarItems');\n    extendListByName('components/IndexPage', 'viewItems');\n    extendListByName('components/IndexPage', 'actionItems');\n    extendListByName('components/LogInModal', 'fields');\n    extendListByName('components/LogInButtons', 'items');\n    extendListByName('components/ReplyComposer', 'headerItems');\n    extendListByName('components/SessionDropdown', 'items');\n    extendListByName('components/SettingsPage', 'settingsItems');\n    extendListByName('components/SignUpModal', 'fields');\n    extendListByName('components/TextEditor', 'controlItems');\n    extendListByName('components/TextEditor', 'toolbarItems');\n    extendListByName('components/UserCard', 'infoItems');\n    extendListByName('components/UserPage', 'navItems');\n    //extendListByName('utils/DiscussionControls', 'controls'); // TODO: there's a CSS rule hiding the first element of the dropdown for mobile layout\n    extendListByName('utils/PostControls', 'controls'); // TODO: post redraw strategy blocks editor from opening\n    extendListByName('utils/UserControls', 'controls');\n    // TODO: itemlist for locales ? needs PR to core\n});\n","export default function (items, config) {\n    let startIndex = 10000; // TODO: don't hard-code\n    config.start.forEach(name => {\n        if (items.has(name)) {\n            items.replace(name, null, startIndex--);\n        }\n    });\n\n    let endIndex = -10000; // TODO: don't hard-code\n    config.end.forEach(name => {\n        if (items.has(name)) {\n            items.replace(name, null, endIndex--);\n        }\n    });\n\n    config.hidden.forEach(name => {\n        if (items.has(name)) {\n            items.remove(name);\n        }\n    });\n}\n","// Same modifications and sorting as in the original ItemList::toArray\nexport default function (list) {\n    const items = [];\n\n    for (const i in list.items) {\n        if (list.items.hasOwnProperty(i) /* removed instanceof check because the class is not public */) {\n            list.items[i].content = Object(list.items[i].content);\n\n            list.items[i].content.itemName = i;\n            items.push(list.items[i]);\n            list.items[i].key = items.length;\n            list.items[i].itemName = i; // Added for ease of access\n        }\n    }\n\n    return items.sort((a, b) => {\n        if (a.priority === b.priority) {\n            return a.key - b.key;\n        } else if (a.priority > b.priority) {\n            return -1;\n        }\n        return 1;\n    });\n}\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['utils/ItemList'];"],"sourceRoot":""}